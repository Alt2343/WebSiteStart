{% extends 'base.html' %}
{% load static %}

{% block content %}
<div style="max-width: 500px; margin: 0 auto; padding: 20px;">
    <h1 style="font-size: 24px; font-weight: 300; text-align: center; margin-bottom: 30px; letter-spacing: 1px;">ЗАКАЗ {{ order.order_number }}</h1>

    <div style="border: 1px solid #000; padding: 25px; margin-bottom: 25px;">
        <div style="display: grid; gap: 15px;">
            <p style="margin: 0; font-size: 14px;">
                <strong>Статус:</strong> {{ order.get_status_display }}
            </p>
            <p style="margin: 0; font-size: 14px;">
                <strong>Оплачен:</strong> {% if order.paid %}Да{% else %}Нет{% endif %}
            </p>
            <p style="margin: 0; font-size: 14px;">
                <strong>Имя:</strong> {{ order.first_name }} {{ order.last_name }}
            </p>
            <p style="margin: 0; font-size: 14px;">
                <strong>Телефон:</strong> {{ order.phone }}
            </p>
            {% if order.email %}
            <p style="margin: 0; font-size: 14px;">
                <strong>Email:</strong> {{ order.email }}
            </p>
            {% endif %}
            <p style="margin: 0; font-size: 14px;">
                <strong>Способ получения:</strong> {{ order.get_delivery_method_display }}
            </p>
            {% if order.delivery_method == 'delivery' %}
                {% if order.city %}
                <p style="margin: 0; font-size: 14px;">
                    <strong>Город:</strong> {{ order.city }}
                </p>
                {% endif %}
                {% if order.address %}
                <p style="margin: 0; font-size: 14px;">
                    <strong>Адрес:</strong> {{ order.address }}
                </p>
                {% endif %}
            {% endif %}
        </div>
    </div>

    <div style="border: 1px solid #000; padding: 25px; margin-bottom: 25px;">
        <h3 style="font-size: 16px; font-weight: 500; margin-top: 0; margin-bottom: 15px;">ТОВАРЫ</h3>
        <ul style="list-style: none; padding: 0; margin: 0 0 15px 0;">
            {% for item in order.items.all %}
                <li style="padding: 8px 0; border-bottom: 1px solid #eee; font-size: 14px;">
                    {{ item.product.name }} — {{ item.quantity }} × {{ item.price }} руб.
                </li>
            {% empty %}
                <li style="padding: 8px 0; font-size: 14px; color: #666;">
                    Нет товаров
                </li>
            {% endfor %}
        </ul>
        <p style="font-size: 16px; font-weight: 500; margin: 0; border-top: 1px solid #000; padding-top: 10px;">
            ИТОГО: {{ order.get_total_cost }} руб.
        </p>
    </div>

    <div style="text-align: center;">
        {% if not order.paid and order.status != 'cancelled' %}
            <a href="{% url 'payment:create_payment' order.id %}"
               style="display: inline-block; padding: 12px 25px; background: #000; color: #fff; text-decoration: none; font-size: 14px; font-weight: 500; text-transform: uppercase;">
                Оплатить заказ
            </a>
        {% endif %}

        <div style="margin-top: 15px;">
            <a href="{% url 'orders:order_lookup' %}"
               style="color: #666; text-decoration: none; font-size: 12px; margin-right: 15px;">
                Поиск заказа
            </a>
            <a href="/"
               style="color: #666; text-decoration: none; font-size: 12px;">
                На главную
            </a>
        </div>
    </div>

    {% if messages %}
    <div style="margin-top: 20px;">
        {% for message in messages %}
            <div style="padding: 10px; border: 1px solid #000; font-size: 14px;">
                {{ message }}
            </div>
        {% endfor %}
    </div>
    {% endif %}
</div>
{% endblock %}